#!/bin/bash
# A utility script that prompts user to authenticate with GitHub in
# local environments

#!/bin/bash
# A utility script that prompts user to authenticate with GitHub in
# local environments

declare -a scopes=("repo" "workflow")

# shellcheck disable=SC2068
if ! gh auth status >/dev/null 2>&1; then
    rapids-echo-stderr "No GitHub authentication detected"
    rapids-echo-stderr "Please authenticate with GitHub to continue"

    # Attempt authentication
    if ! gh auth login \
        --web --git-protocol https \
        --hostname "github.com" \
        ${scopes[@]/#/--scopes }; then
        
        rapids-echo-stderr "GitHub authentication failed. Exiting."
        exit 1
    fi
fi
